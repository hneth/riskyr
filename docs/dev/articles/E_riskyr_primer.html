<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quick Start Primer • riskyr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Quick Start Primer">
<meta property="og:description" content="">
<meta property="og:image" content="https://hneth.github.io/riskyr/logo.png">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">riskyr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.2.0.9008</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="../articles/E_riskyr_primer.html">Getting started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    All articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/A_user_guide.html">User guide</a>
    </li>
    <li>
      <a href="../articles/B_data_formats.html">Data formats</a>
    </li>
    <li>
      <a href="../articles/C_confusion_matrix.html">Confusion matrix</a>
    </li>
    <li>
      <a href="../articles/D_functional_perspectives.html">Functional perspectives</a>
    </li>
    <li>
      <a href="../articles/E_riskyr_primer.html">Quick start primer</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://hneth.github.io/riskyr/">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Quick Start Primer</h1>
                        <h4 class="author">Nico Gradwohl &amp; Hansjörg Neth, SPDS, uni.kn</h4>
            
            <h4 class="date">2018 03 12</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/hneth/riskyr/blob/master/vignettes/E_riskyr_primer.Rmd"><code>vignettes/E_riskyr_primer.Rmd</code></a></small>
      <div class="hidden name"><code>E_riskyr_primer.Rmd</code></div>

    </div>

    
    
<!-- riskyr logo: -->
<p><a href="https://github.com/hneth/riskyr"> <img src="../inst/pix/riskyr_cube.png" alt="riskyr" style="width: 125px; float: right; border:20;"></a> <!-- ![riskyr](../inst/pix/riskyr_cube.png) --> <!-- knitr::include_graphics("../inst/pix/riskyr_cube.png") --></p>
<p><code>riskyr</code> is a toolbox for rendering risk literacy more transparent. Its goal is to gain insights into risk-related scenarios with a minimum of hassle and maximum of fun.</p>
<p>This page assumes that you just installed the package and are eager to see what you can do with it.<br>
(See the <a href="A_user_guide.html">User guide</a> for a more comprehensive introduction.)</p>
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting started</h2>
<p>How can you use <code>riskyr</code>? Basically, there are two ways to get started:</p>
<ol style="list-style-type: decimal">
<li><p>Define your own scenario from risk-related information (typically provided in terms of probabilities).</p></li>
<li><p>Inspect one of 24 predefined scenarios to get a glimpse of what types of scenarios are possible.</p></li>
</ol>
<p>Either way, you will soon explore some specific risk-related scenario and uncover relationships between its parameters. Please load the package first, if you have not already done so:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">"riskyr"</span>)  <span class="co"># loads the package</span></code></pre></div>
<div id="defining-a-scenario" class="section level3">
<h3 class="hasAnchor">
<a href="#defining-a-scenario" class="anchor"></a>Defining a scenario</h3>
<p>Let’s launch your <code>riskyr</code>-career by creating a ficticious risk scenario that we construct from scratch:<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a></p>
<div id="example" class="section level4">
<h4 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h4>
<!-- Example: Testing for recidivism -->
<blockquote>
<p><strong>Identifying reoffenders</strong></p>
<p>Imagine you are developing a test to predict if a jailed criminal offender will reoffend after his or her release. Your research yields the following information:</p>
<ol style="list-style-type: decimal">
<li>45% of 753 jailed offenders in some prison re-offend after they are released (<code>prev = .45</code>).<br>
</li>
<li>Your test correctly detects those who will re-offend in 98% of the cases (<code>sens = .98</code>).<br>
</li>
<li>Your test falsely identifies 54% of those who will not re-offend as potential re-offenders. Conversely, this implies that your test correctly identifies 46% of those that will not reoffend (<code>spec = .46</code>).</li>
</ol>
<p>John D. is about to get released and is tested. The test predicts that he will reoffend.</p>
<p>What is the probability that John D. will actually reoffend, given his test result?</p>
</blockquote>
<p>To answer this question, you could calculate the corresponding probabilities or frequencies (as explained in the <a href="A_user_guide.html">user guide</a>). Alternatively, you can use the <code><a href="../reference/riskyr.html">riskyr()</a></code> function to create a <code>riskyr</code> scenario that you can modify, inspect, and visualize in various ways.</p>
</div>
<div id="necessary-scenario-information" class="section level4">
<h4 class="hasAnchor">
<a href="#necessary-scenario-information" class="anchor"></a>Necessary scenario information</h4>
<!-- A: necessary info: probabilities and N: -->
<p>First, we need to translate the numeric information provided in our example into parameter values:</p>
<ol style="list-style-type: decimal">
<li><p>The probability of reoffending provides the <em>prevalence</em> in our population: <code>prev = .45</code>.</p></li>
<li><p>The test’s conditional probability of correctly detecting a reoffender provides its <em>sensitivity</em>: <code>sens = .98</code>.</p></li>
<li><p>The test’s conditional probability of correctly detecting someone who will not reoffend provides its <em>specificity</em>: <code>spec = .46</code>.<br>
(This corresponds to a <em>false alarm rate</em> <code>fart = 1 - spec = .54</code>.)</p></li>
<li><p>In addition, the <em>population size</em> of your sample was mentioned to be <code>N = 753</code>.<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a></p></li>
</ol>
<p>The following code defines a perfectly valid <code>riskyr</code> scenario from 3 essential probabilities:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create a minimal scenario (from probabilities):</span>
my_scenario &lt;-<span class="st"> </span><span class="kw"><a href="../reference/riskyr.html">riskyr</a></span>(<span class="dt">prev =</span> .<span class="dv">45</span>, 
                      <span class="dt">sens =</span> .<span class="dv">98</span>,
                      <span class="dt">spec =</span> .<span class="dv">46</span>)</code></pre></div>
<!-- Mention alternative ways of entering the same (e.g., by providing fart, rather than spec)? -->
<p>This creates <code>my_scenario</code> from 3 essential probabilities (<code>prev</code>, <code>sens</code>, and <code>spec</code> or <code>fart</code>) and computes a suitable population size <code>N</code> of 1000.</p>
<p>Alternatively, we could create the same minimal scenario from 4 essential frequencies (if they are known). The following code creates the scenario a second time, but now uses the frequencies of <code>my_scenario</code> to do so:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create a minimal scenario (from frequencies):</span>
my_scenario_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/riskyr.html">riskyr</a></span>(<span class="dt">hi =</span> my_scenario<span class="op">$</span>hi, 
                        <span class="dt">mi =</span> my_scenario<span class="op">$</span>mi,
                        <span class="dt">fa =</span> my_scenario<span class="op">$</span>fa,
                        <span class="dt">cr =</span> my_scenario<span class="op">$</span>cr)</code></pre></div>
<p>If this succeeds, <code>my_scenario</code> and <code>my_scenario_2</code> contain the same information:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/all.equal">all.equal</a></span>(my_scenario, my_scenario_<span class="dv">2</span>)
<span class="co">#&gt; [1] TRUE</span></code></pre></div>
</div>
<div id="optional-scenario-information" class="section level4">
<h4 class="hasAnchor">
<a href="#optional-scenario-information" class="anchor"></a>Optional scenario information</h4>
<!-- B: optional info: text labels -->
<p>To make various outputs more recognizable, many aspects of a <code>riskyr</code> scenario can be described by setting optional <code>arguments</code>:</p>
<ul>
<li>
<code>scen_lbl</code> specifies a label by which you can recognize the scenario (e.g., “Identifying reoffenders”).<br>
</li>
<li><p><code>popu_lbl</code> specifies the population of interest (e.g., “inmates”).</p></li>
<li>
<code>cond_lbl</code> specifies the condition of interest (i.e., “reoffending”).</li>
<li>
<code>cond_true_lbl</code> specifies a label for the condition being true (“offends again”).</li>
<li><p><code>cond_false_lbl</code> specifies a label for the condition being false (“does not offend again”).</p></li>
<li>
<code>dec_lbl</code> specifies the nature of the decision, prediction, or test (“test result”).</li>
<li>
<code>dec_pos_lbl</code> specifies a positive decision regarding the condition (“predict to reoffend”).</li>
<li><p><code>dec_neg_lbl</code> specifies a negative decision regarding the condition (“predict to not reoffend”).</p></li>
<li>
<code>hi_lbl</code>, <code>mi_lbl</code>, <code>fa_lbl</code>, and <code>cr_lbl</code> specify the four possible combinations of conditions and decisions:
<ol style="list-style-type: decimal">
<li>hit: The test predicts that the inmate reoffends and s/he does (“reoffender found”);<br>
</li>
<li>miss: The test predicts that the inmate does not reoffend but s/he does (“reoffender missed”);<br>
</li>
<li>false alarm: The test predicts that the inmate reoffends but s/he does not (“false accusation”;<br>
</li>
<li>correct rejection: The test predicts that the inmate does not reoffend and s/he does not (“correct release”).</li>
</ol>
</li>
</ul>
<p>Whereas specifying three essential probabilities is necessary to define a valid <code>riskyr</code> scenario, providing <code>N</code> and the other arguments are entirely optional. For illustrative purposes, we create a very well-specified <code>riskyr</code> scenario:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create a scenario with custom labels: </span>
my_scenario &lt;-<span class="st"> </span><span class="kw"><a href="../reference/riskyr.html">riskyr</a></span>(<span class="dt">scen_lbl =</span> <span class="st">"Identifying reoffenders"</span>, 
                      <span class="dt">popu_lbl =</span> <span class="st">"prison inmates"</span>, 
                      <span class="dt">cond_lbl =</span> <span class="st">"reoffending"</span>,
                      <span class="dt">cond_true_lbl =</span> <span class="st">"reoffends"</span>, <span class="dt">cond_false_lbl =</span> <span class="st">"does not reoffend"</span>,
                      <span class="dt">dec_lbl =</span> <span class="st">"test result"</span>,
                      <span class="dt">dec_pos_lbl =</span> <span class="st">"predict to</span><span class="ch">\n</span><span class="st">reoffend"</span>, <span class="dt">dec_neg_lbl =</span> <span class="st">"predict to</span><span class="ch">\n</span><span class="st">not reoffend"</span>,
                      <span class="dt">hi_lbl =</span> <span class="st">"reoffender found"</span>, <span class="dt">mi_lbl =</span> <span class="st">"reoffender missed"</span>,
                      <span class="dt">fa_lbl =</span> <span class="st">"false accusation"</span>, <span class="dt">cr_lbl =</span> <span class="st">"correct release"</span>,
                      <span class="dt">prev =</span> .<span class="dv">45</span>,  <span class="co"># prevalence of being a reoffender. </span>
                      <span class="dt">sens =</span> .<span class="dv">98</span>,  <span class="co"># p( will reoffend | offends again )</span>
                      <span class="dt">spec =</span> .<span class="dv">46</span>,  <span class="co"># p( will not reoffend | does not offend again )</span>
                      <span class="dt">fart =</span>  <span class="ot">NA</span>,  <span class="co"># p( will reoffend | does not offend gain )</span>
                      <span class="dt">N =</span> <span class="dv">753</span>,     <span class="co"># population size</span>
                      <span class="dt">scen_src =</span> <span class="st">"(a ficticious example)"</span>)</code></pre></div>
</div>
<div id="viewing-scenario-information" class="section level4">
<h4 class="hasAnchor">
<a href="#viewing-scenario-information" class="anchor"></a>Viewing scenario information</h4>
<!-- Motto: -->
<blockquote>
<p>The simple graph has brought more information to the data analyst’s mind than any other device. (…) the meat of the matter can usually be set out in a graph.<br>
(John W. Tukey)<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a></p>
</blockquote>
<p>We always <em>can</em> inspect the details of <code>my_scenario</code> by computing additional metrics and studying their values with <code><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary(my_scenario)</a></code>. But anyone who regularly works with data knows that graphs can provide key insights faster and in different ways than written summaries and tables. To illustrate this point, we create and inspect some visualizations of our scenario.</p>
<div id="prism-plot" class="section level5">
<h5 class="hasAnchor">
<a href="#prism-plot" class="anchor"></a>Prism plot</h5>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(my_scenario)</code></pre></div>
<p><img src="E_riskyr_primer_files/figure-html/plot_default-1.png" width="691.2" style="display: block; margin: auto;"></p>
<p>A <em>prism plot</em> (or network diagram) shows key frequencies as colored boxes and corresponding probabilities as the edges that connect the boxes. In this particular version, the size of the boxes is fixed. However, we can visualize the relative size of frequencies by using the <code>area</code> argument and show the names of the frequencies (as provided by our text labels) by adding the <code>f_lbl = "nam"</code> argument. To save space, we do not show the plots here, but please try and see for yourself:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(my_scenario, <span class="dt">area =</span> <span class="st">"sq"</span>, <span class="dt">f_lbl =</span> <span class="st">"nam"</span>, <span class="dt">p_lbl =</span> <span class="st">"mix"</span>)  <span class="co"># show frequency names</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(my_scenario, <span class="dt">area =</span> <span class="st">"hr"</span>, <span class="dt">f_lbl =</span> <span class="st">"num"</span>, <span class="dt">p_lbl =</span> <span class="st">"num"</span>)  <span class="co"># only numeric labels</span></code></pre></div>
<p>The resulting graph maps frequency to the size of square boxes, which makes it easier to distinguish between cases with high and with low frequencies.</p>
</div>
<div id="practice" class="section level5">
<h5 class="hasAnchor">
<a href="#practice" class="anchor"></a>Practice</h5>
<ul>
<li>Plot <code>my_scenario</code> with the option <code>area = "hr"</code>. What do you see?</li>
<li>Add <code>by = "cdac"</code> as another argument to your plotting call. How does the resulting plot relate to the previous ones?</li>
<li>When calling <code><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot(my_scenario)</a></code>, <code>riskyr</code> creates a plot of <code>type = "prism"</code> by default. Use <code><a href="../reference/plot_prism.html">?plot_prism</a></code> for the documentation of <code>plot_prism</code> to learn about and try out additional arguments.</li>
</ul>
</div>
<div id="icon-array" class="section level5">
<h5 class="hasAnchor">
<a href="#icon-array" class="anchor"></a>Icon array</h5>
<p>An <em>icon array</em> displays the entire population of inmates classified by condition (whether they will reoffend or not) and decisions (our test’s predictions). We can plot this display for our scenario by using the <code>plot</code> function and specifying the <code>type = "icons"</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(my_scenario, <span class="dt">type =</span> <span class="st">"icons"</span>)</code></pre></div>
<p><img src="E_riskyr_primer_files/figure-html/icons-1.png" width="691.2" style="display: block; margin: auto;"></p>
<p>From the icon array, we can easily see that roughly half of the inmates reoffend (see the icons in dark green and dark blue). The majority of the reoffenders are classified correctly (shown in dark green rather than dark blue).</p>
<p>But where is John D.? His test result predicted that he would reoffend. Depending on his actual behavior, this means that he will <em>either</em> be classified as a “reoffender found” (if he actually reoffends: dark green icons) <em>or</em> as a “false accusation” (if he does not reoffend: light red icons). As there are a similar number of both types of icons (with some skew towards “reoffenders found”), it appears that his chances of actually reoffending are only slightly higher than chance.</p>
<p>To dig deeper into the dirty details of <code>my_scenario</code>, let us look at its <code>summary</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(my_scenario)
<span class="co">#&gt; Scenario:  Identifying reoffenders </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Condition:  reoffending </span>
<span class="co">#&gt; Decision:  test result </span>
<span class="co">#&gt; Population:  prison inmates </span>
<span class="co">#&gt; N =  753 </span>
<span class="co">#&gt; Source:  (a ficticious example) </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Probabilities:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Essential probabilities:</span>
<span class="co">#&gt; prev sens mirt spec fart </span>
<span class="co">#&gt; 0.45 0.98 0.02 0.46 0.54 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Other probabilities:</span>
<span class="co">#&gt;  ppod   PPV   NPV   FDR   FOR   acc </span>
<span class="co">#&gt; 0.738 0.598 0.966 0.402 0.034 0.694 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Frequencies:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  by conditions:</span>
<span class="co">#&gt;  cond_true cond_false </span>
<span class="co">#&gt;        339        414 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  by decision:</span>
<span class="co">#&gt; dec_pos dec_neg </span>
<span class="co">#&gt;     556     197 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  by correspondence (of decision to condition):</span>
<span class="co">#&gt; dec_cor dec_err </span>
<span class="co">#&gt;     522     231 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  4 essential (SDT) frequencies:</span>
<span class="co">#&gt;  hi  mi  fa  cr </span>
<span class="co">#&gt; 332   7 224 190 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Accuracy:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  acc:</span>
<span class="co">#&gt; 0.694</span></code></pre></div>
<p>The text output (printed in R’s console window) provides a brief description of our scenario (i.e., its name, the condition and decision of interest, as well as the type and size of population), followed by a range of numeric parameters (structured into probabilities, frequencies, and overall accuracy).</p>
<p>In the present case, we were interested in a person’s conditional probability of reoffending given a positive test result. This metric is also known as the <em>positive predictive value</em> (PPV). Our summary information shows <code>PPV = 0.598</code>. Thus, based on the information provided, John D.’s probability of reoffending is 59.8% (quite in line with our visual estimate from the icon array above).</p>
</div>
</div>
<div id="alternative-perspectives" class="section level4">
<h4 class="hasAnchor">
<a href="#alternative-perspectives" class="anchor"></a>Alternative perspectives</h4>
<p>An alternative way to view the our scenario is a <em>frequency tree</em> that splits the population into two subgroups (e.g., by the two possible results of our test) and then classify all members of the population by the possible combinations of decision and actual condition, yielding the same four types of frequencies as identified above (and listed as <code>hi</code>, <code>mi</code>, <code>fa</code>, and <code>cr</code> in the <code>summary</code> above):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(my_scenario, <span class="dt">type =</span> <span class="st">"tree"</span>, <span class="dt">by =</span> <span class="st">"dc"</span>)  <span class="co"># plot tree diagram (splitting N by decision)</span></code></pre></div>
<p><img src="E_riskyr_primer_files/figure-html/tree-1.png" width="691.2" style="display: block; margin: auto;"></p>
<p>The frequency tree also shows us how the PPV (shown on the arrow on the lower left) can be computed from frequencies (shown in the boxes): PPV = (number of offenders found)/(number of people predicted to reoffend) (or <code>PPV = hi/dec_pos</code>). Numerically, we see that <code>PPV = 332/556</code>, which amounts to about 60% (or <code>1 - 0.403</code>).</p>
<p>The tree also depicts additional information that corresponds to our <code>summary</code> from above. For instance, if we had wondered about the negative predictive value (NPV) of a negative test result (i.e., the conditional probability of not offending given that the test predicted this), the tree shows this to be <code>NPV = 190/197</code> or about 96.4% (as <code>NPV = cr/dec_neg</code>). Again, this closely corresponds to our <code>summary</code> information of <code>NPV = 0.966</code>.<a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a></p>
<p>A good question to ask is: To what extend do the positive and negative predictive values (PPV and NPV) depend on the likelihood of reoffending in our population (i.e., the condition’s prevalence)? To answer this, the following code allows to show conditional probabilities (here <code>PPV</code> and <code>NPV</code>) as a function of <code>prev</code> (and additionally assumes a 5%-uncertainty concerning the exact parameter values):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(my_scenario, <span class="dt">type =</span> <span class="st">"curve"</span>, <span class="dt">uc =</span> .<span class="dv">05</span>)</code></pre></div>
<p><img src="E_riskyr_primer_files/figure-html/plotting_curve-1.png" width="672" style="display: block; margin: auto;"></p>
<p>As before, we can read off that the current values of <code>PPV = 59.76%</code> and <code>NPV = 96,56%</code>, but also see that our 5%-uncertainty implies relatively large fluctuations of the exact numeric values. Importantly, the curves also show that the prevalence value is absolutely crucial for the value of both <code>PPV</code> and <code>NPV</code>. For instance, if <code>prev</code> dropped further, the <code>PPV</code> of our test was also considerably lower. In fact, both the PPV and NPV always vary from 0 to 1 depending on the value of <code>prev</code>, which means that specifying them is actually meaningless when the corresponding value of <code>prev</code> is not communicated as well. (See the guide on <a href="D_functional_perspectives.html">functional perspectives</a> for additional information and options.)</p>
<p>Having illustrated how we can create a scenario from scratch and begin to inspect it in a few ways, we can now turn towards loading scenarios that are contained in the <code>riskyr</code> package.</p>
</div>
</div>
<div id="using-existing-scenarios" class="section level3">
<h3 class="hasAnchor">
<a href="#using-existing-scenarios" class="anchor"></a>Using existing scenarios</h3>
<p>As defining your own scenarios can be cumbersome and the literature is full of existing problems (that study so-called Bayesian reasoning), <code>riskyr</code> provides a set of – currently 25) – pre-defined scenarios (stored in a list <code>scenarios</code>). The following table provides a first overview of the scenarios available, including their relevant condition, their population size <code>N</code>, and basic probability information:</p>
<table class="table">
<thead><tr class="header">
<th align="left">Scenario</th>
<th align="left">Condition</th>
<th align="right">N</th>
<th align="right">prev</th>
<th align="right">sens</th>
<th align="right">spec</th>
<th align="right">fart</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Bowel cancer screening</td>
<td align="left">Bowel cancer</td>
<td align="right">2030</td>
<td align="right">0.015</td>
<td align="right">0.667</td>
<td align="right">0.910</td>
<td align="right">0.090</td>
</tr>
<tr class="even">
<td align="left">Cab problem</td>
<td align="left">Company</td>
<td align="right">100</td>
<td align="right">0.150</td>
<td align="right">0.800</td>
<td align="right">0.800</td>
<td align="right">0.200</td>
</tr>
<tr class="odd">
<td align="left">Hemoccult test</td>
<td align="left">Colorectal cancer</td>
<td align="right">100000</td>
<td align="right">0.300</td>
<td align="right">0.050</td>
<td align="right">0.970</td>
<td align="right">0.030</td>
</tr>
<tr class="even">
<td align="left">Mammography</td>
<td align="left">Breast cancer</td>
<td align="right">1000</td>
<td align="right">0.010</td>
<td align="right">0.800</td>
<td align="right">0.900</td>
<td align="right">0.100</td>
</tr>
<tr class="odd">
<td align="left">Mammography (freq)</td>
<td align="left">Breast cancer</td>
<td align="right">1000</td>
<td align="right">0.010</td>
<td align="right">0.800</td>
<td align="right">0.904</td>
<td align="right">0.096</td>
</tr>
<tr class="even">
<td align="left">Mammography (prob)</td>
<td align="left">Breast cancer</td>
<td align="right">1000</td>
<td align="right">0.010</td>
<td align="right">0.800</td>
<td align="right">0.904</td>
<td align="right">0.096</td>
</tr>
<tr class="odd">
<td align="left">Mushrooms</td>
<td align="left">Color</td>
<td align="right">100</td>
<td align="right">0.200</td>
<td align="right">0.200</td>
<td align="right">0.950</td>
<td align="right">0.050</td>
</tr>
<tr class="even">
<td align="left">Musical town</td>
<td align="left">Choir membership</td>
<td align="right">1000</td>
<td align="right">0.500</td>
<td align="right">0.200</td>
<td align="right">0.400</td>
<td align="right">0.600</td>
</tr>
<tr class="odd">
<td align="left">PSA test (baseline)</td>
<td align="left">Prostate cancer</td>
<td align="right">1000</td>
<td align="right">0.063</td>
<td align="right">0.210</td>
<td align="right">0.940</td>
<td align="right">0.060</td>
</tr>
<tr class="even">
<td align="left">PSA test (patients)</td>
<td align="left">Prostate cancer</td>
<td align="right">1000</td>
<td align="right">0.500</td>
<td align="right">0.210</td>
<td align="right">0.940</td>
<td align="right">0.060</td>
</tr>
<tr class="odd">
<td align="left">Psylicraptis screening</td>
<td align="left">Psylicraptis</td>
<td align="right">100</td>
<td align="right">0.010</td>
<td align="right">0.900</td>
<td align="right">0.990</td>
<td align="right">0.010</td>
</tr>
<tr class="even">
<td align="left">Sepsis</td>
<td align="left">Sepsis</td>
<td align="right">100</td>
<td align="right">0.100</td>
<td align="right">0.800</td>
<td align="right">0.900</td>
<td align="right">0.100</td>
</tr>
<tr class="odd">
<td align="left">Amniozentese</td>
<td align="left">Trisomie 21</td>
<td align="right">10000</td>
<td align="right">0.080</td>
<td align="right">0.994</td>
<td align="right">0.995</td>
<td align="right">0.005</td>
</tr>
<tr class="even">
<td align="left">HIV-Test</td>
<td align="left">HIV</td>
<td align="right">100000</td>
<td align="right">0.000</td>
<td align="right">1.000</td>
<td align="right">1.000</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">HIV-Test</td>
<td align="left">HIV</td>
<td align="right">250000</td>
<td align="right">0.000</td>
<td align="right">1.000</td>
<td align="right">1.000</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">HIV-Test</td>
<td align="left">HIV</td>
<td align="right">10000000</td>
<td align="right">0.000</td>
<td align="right">0.997</td>
<td align="right">1.000</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">HIV-Test</td>
<td align="left">HIV</td>
<td align="right">10000000</td>
<td align="right">0.000</td>
<td align="right">0.997</td>
<td align="right">1.000</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">Mammografie</td>
<td align="left">Brustkrebs</td>
<td align="right">1000</td>
<td align="right">0.010</td>
<td align="right">0.900</td>
<td align="right">0.910</td>
<td align="right">0.090</td>
</tr>
<tr class="odd">
<td align="left">Mammografie</td>
<td align="left">Brustkrebs</td>
<td align="right">1000</td>
<td align="right">0.010</td>
<td align="right">0.900</td>
<td align="right">0.910</td>
<td align="right">0.090</td>
</tr>
<tr class="even">
<td align="left">Mammografie</td>
<td align="left">Brustkrebs</td>
<td align="right">1000</td>
<td align="right">0.600</td>
<td align="right">0.900</td>
<td align="right">0.910</td>
<td align="right">0.090</td>
</tr>
<tr class="odd">
<td align="left">Mammografie</td>
<td align="left">Brustkrebs</td>
<td align="right">1000</td>
<td align="right">0.940</td>
<td align="right">0.900</td>
<td align="right">0.910</td>
<td align="right">0.090</td>
</tr>
<tr class="even">
<td align="left">Nackenfaltentest (NFT)</td>
<td align="left">Trisomie 21</td>
<td align="right">1000</td>
<td align="right">0.010</td>
<td align="right">0.900</td>
<td align="right">0.950</td>
<td align="right">0.050</td>
</tr>
<tr class="odd">
<td align="left">Nackenfaltentest (NFT)</td>
<td align="left">Trisomie 21</td>
<td align="right">10000</td>
<td align="right">0.019</td>
<td align="right">0.800</td>
<td align="right">0.820</td>
<td align="right">0.180</td>
</tr>
<tr class="even">
<td align="left">Sigmoidoskopie</td>
<td align="left">Darmkrebs</td>
<td align="right">1000000</td>
<td align="right">0.000</td>
<td align="right">0.700</td>
<td align="right">0.900</td>
<td align="right">0.100</td>
</tr>
<tr class="odd">
<td align="left">Sigmoidoskopie</td>
<td align="left">Darmkrebs</td>
<td align="right">1000000</td>
<td align="right">0.035</td>
<td align="right">0.700</td>
<td align="right">0.900</td>
<td align="right">0.100</td>
</tr>
</tbody>
</table>
<p>In the following, we show you can select and explore these scenarios.</p>
<div id="selecting-a-scenario" class="section level4">
<h4 class="hasAnchor">
<a href="#selecting-a-scenario" class="anchor"></a>1. Selecting a scenario</h4>
<p>Let us assume you want to learn more about the controversy surrounding screening procedures of prostate-cancer (known as PSA screening). Scenario 21 in our collection of <code>scenarios</code> is from an article on this topic (Arkes &amp; Gaissmaier, 2012). To select a particular scenario, simply assign it to an R object. For instance, we can assign Scenario 10 (i.e., <code>scenarios$n10</code>) to an object <code>s10</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">s10 &lt;-<span class="st"> </span>scenarios<span class="op">$</span>n10  <span class="co"># assign pre-defined Scenario 10 to s10.</span></code></pre></div>
</div>
<div id="printing-scenario-information" class="section level4">
<h4 class="hasAnchor">
<a href="#printing-scenario-information" class="anchor"></a>2. Printing scenario information</h4>
<p>As each scenario is stored as a list, different aspects of a scenario can be printed by their element names:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Show basic scenario information: </span>
s10<span class="op">$</span>scen_lbl  <span class="co"># shows descriptive label:</span>
<span class="co">#&gt; [1] "PSA test (patients)"</span>
s10<span class="op">$</span>cond_lbl  <span class="co"># shows current condition:</span>
<span class="co">#&gt; [1] "Prostate cancer"</span>
s10<span class="op">$</span>dec_lbl   <span class="co"># shows current decision:</span>
<span class="co">#&gt; [1] "PSA-Test"</span>
s10<span class="op">$</span>popu_lbl  <span class="co"># shows current population:</span>
<span class="co">#&gt; [1] "Male patients with symptoms"</span>
s10<span class="op">$</span>scen_apa  <span class="co"># shows current source: </span>
<span class="co">#&gt; [1] "Arkes, H. R., &amp; Gaissmaier, W. (2012). Psychological research and the prostate-cancer screening controversy. Psychological Science, 23(6), 547--553."</span></code></pre></div>
<p>A description of the scenario can be printed by calling <code>s10$scen.txt</code>:</p>
<pre><code>With a cutoff point of 4 ng/ml, the PSA test is reported to have a sensitivity of approximately 21% and a specificity of approximately 94% (Thompson et al., 2005).  That means the PSA test will correctly classify 21% of the men with prostate cancer and 94% of the men who do not have prostate cancer.  Conversely, the test will miss about 79% of the men who actually have prostate cancer, and raise a false alarm in 6% of the men who actually do not have prostate cancer. Suppose that this test is given to 1,000 patients at a urology clinic who have symptoms diagnostic of prostate cancer.  Perhaps 50% of these men truly have prostate cancer. Table 1 depicts this situation.  Of the 135 men who test positive, 105 actually have prostate cancer.  Thus, the positive predictive value of the PSA test in this situation is approximately 78% (i.e., 105/135 _ 100).</code></pre>
<p>As explained above, an overview of the main parameters of a scenario is provided by <code>summary</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(s10) <span class="co"># summarizes key scenario information:</span>
<span class="co">#&gt; Scenario:  PSA test (patients) </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Condition:  Prostate cancer </span>
<span class="co">#&gt; Decision:  PSA-Test </span>
<span class="co">#&gt; Population:  Male patients with symptoms </span>
<span class="co">#&gt; N =  1000 </span>
<span class="co">#&gt; Source:  Arkes &amp; Gaissmaier (2012), p. 550 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Probabilities:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Essential probabilities:</span>
<span class="co">#&gt; prev sens mirt spec fart </span>
<span class="co">#&gt; 0.50 0.21 0.79 0.94 0.06 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Other probabilities:</span>
<span class="co">#&gt;  ppod   PPV   NPV   FDR   FOR   acc </span>
<span class="co">#&gt; 0.135 0.778 0.543 0.222 0.457 0.575 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Frequencies:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  by conditions:</span>
<span class="co">#&gt;  cond_true cond_false </span>
<span class="co">#&gt;        500        500 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  by decision:</span>
<span class="co">#&gt; dec_pos dec_neg </span>
<span class="co">#&gt;     135     865 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  by correspondence (of decision to condition):</span>
<span class="co">#&gt; dec_cor dec_err </span>
<span class="co">#&gt;     575     425 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  4 essential (SDT) frequencies:</span>
<span class="co">#&gt;  hi  mi  fa  cr </span>
<span class="co">#&gt; 105 395  30 470 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Accuracy:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  acc:</span>
<span class="co">#&gt; 0.575</span></code></pre></div>
<p>Note that – in this particular population – the prevalence for the condition (Prostate cancer) is assumed to be relatively high (with a value of 50%).</p>
</div>
<div id="visualizing-frequencies-and-probabilities" class="section level4">
<h4 class="hasAnchor">
<a href="#visualizing-frequencies-and-probabilities" class="anchor"></a>3. Visualizing frequencies and probabilities</h4>
<p>To eyeball basic scenario information, we can visualize it in many different ways. To save space, we do not show the plots here, but please try and see for yourself:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(s10, <span class="dt">type =</span> <span class="st">"tab"</span>)                   <span class="co"># plot 2x2 table </span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(s10, <span class="dt">type =</span> <span class="st">"icons"</span>, <span class="dt">cex_lbl =</span> .<span class="dv">75</span>)  <span class="co"># plot an icon array </span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(s10, <span class="dt">type =</span> <span class="st">"prism"</span>, <span class="dt">area =</span> <span class="st">"sq"</span>)    <span class="co"># plot a network/prism diagram</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(s10, <span class="dt">type =</span> <span class="st">"area"</span>)                  <span class="co"># plot an area plot</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(s10, <span class="dt">type =</span> <span class="st">"bar"</span>, <span class="dt">dir =</span> <span class="dv">2</span>)          <span class="co"># plot a bar chart</span></code></pre></div>
<p>These initial inspections reveal that the overall accuracy of the decision considered (PSA test (patients)) is not great: There are almost as many cases of incorrect classifications (shown in blue) as correct ones (shown in green). In fact, both the summary and the icon array note that the overall accuracy of the test is at 57.5%. Given that green squares signal correct classifications and blue squares signal incorrect classifications, it is immediately obvious that our main issue with accuracy here consists in so-called misses: Patients with cancer that remain undetected (marked with “FN” and denoted by icons in lighter blue).</p>
<p>Next, we could another prism diagram, to further illuminate the interplay between probabilities and frequencies in this scenario:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(s10, 
     <span class="dt">by =</span> <span class="st">"cddc"</span>,      <span class="co"># perspective: upper half by condition, lower half by decision </span>
     <span class="dt">area =</span> <span class="st">"hr"</span>,      <span class="co"># frequency boxes as horizontal rectangles (scaled to N)</span>
     <span class="dt">p_lbl =</span> <span class="st">"num"</span>)    <span class="co"># probability labels: numeric only</span></code></pre></div>
<p><img src="E_riskyr_primer_files/figure-html/s10_prism_1-1.png" width="691.2" style="display: block; margin: auto;"></p>
<p>This variant of the prism plot shows how the probability values of key condition and decision parameters split the assumed population of <code>N = 1000</code> patients into subgroups that correspond to 9 frequencies (also listed in the summary). Calling the same command with the optional argument <code>p_lbl = "nam"</code> would print the probability names, rather than their values (see also the options <code>p_lbl = "min"</code> and <code>"mix"</code>.) The middle row of boxes shows the four essential frequencies (of hits <code>hi</code>, misses <code>mi</code>, false alarms <code>fa</code>, and correct rejections <code>cr</code>) in colors corresponding to the icon array above. Setting <code>area = "hr"</code> in our <code>plot</code> command switched the default display (of rectangular boxes) to a version in which the frequency boxes at each level of the network are shown as horizontal rectangles (hence <code>hr</code>) and the box widths are scaled to add up to the population width <code>N</code> on each level. Thus, the relative width of each box illustrates the frequency of corresponding cases, making it easy to spot locations and paths with few or many cases.</p>
<p>A fact that was not so obvious in the icon array – but shown in the lower half of the prism plot – is that the current scenario yields mostly negative decisions (865 out of 1000, or 86.5%). Of those negative decisions, 470 (or 54.34%) are correct (see <code>cr</code> shown in light green) and 395 (or 45.66%) are incorrect (see <code>mi</code> shown in dark red). The ratio <code>cr/dec_neg = 470/865 = 54.34</code>% indicates the negative predictive value (<code>NPV</code>) of the test.</p>
<div id="practice-1" class="section level5">
<h5 class="hasAnchor">
<a href="#practice-1" class="anchor"></a>Practice</h5>
<ul>
<li><p>Can you find the current positive predictive value (<code>PPV</code>) in the diagram? (Hint: Its value marks an arrow between two boxes, but is also shown on the margin and was contained in the summary above.)</p></li>
<li><p>Re-create the prism plot of <code>s10</code> from different perspectives (e.g., <code>by = "cdac"</code>) and different area settings (e.g., <code>area = "sq"</code>, see “?plot_prism” for the options available). For instance, what would the following commands plot:</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(s10, <span class="dt">by =</span> <span class="st">"cdac"</span>, <span class="dt">area =</span> <span class="st">"sq"</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(s10, <span class="dt">by =</span> <span class="st">"ac"</span>, <span class="dt">area =</span> <span class="st">"hr"</span>)</code></pre></div>
</div>
</div>
<div id="visualizing-probabilistic-relationships" class="section level4">
<h4 class="hasAnchor">
<a href="#visualizing-probabilistic-relationships" class="anchor"></a>4. Visualizing probabilistic relationships</h4>
<p>One way to further understand the relations between basic probabilities – like the prevalence <code>prev</code>, which does <em>not</em> depend on our decision, but only on the environmental probability of the condition (here: “Prostate cancer”) – and probabilities conditional on both the condition and on features of the decision (like <code>PPV</code> and <code>NPV</code>) is to plot the latter as a function of the former. Calling <code>type = "curve"</code> does this for us. To save space, we do not show the plots here, but please try and see for yourself:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(s10, <span class="dt">type =</span> <span class="st">"curve"</span>, 
     <span class="dt">what =</span> <span class="st">"all"</span>,  <span class="co"># plot "all" available curves </span>
     <span class="dt">uc =</span> .<span class="dv">05</span>)      <span class="co"># with a 5%-uncertainty range </span></code></pre></div>
<p>The additional argument <code>what = "all"</code> instructed <code>riskyr</code> to provide us with additional curves, corresponding to the percentage of positive decisions (<code>ppod</code>) and overall accuracy (<code>acc</code>). Just like <code>PPV</code> and <code>NPV</code>, the values of these metrics crucially depend on the value of the current prevalence (shown on the x-axis) and on our current range of uncertainty (shown as shaded polygons around the curves). Interestingly, the curves of <code>ppod</code> and <code>acc</code> appear to be linear, even though the <code>riskyr</code> function plots them in exactly the same way as <code>PPV</code> and <code>NPV</code>. Would you have predicted this without seeing it?</p>
<div id="practice-2" class="section level5">
<h5 class="hasAnchor">
<a href="#practice-2" class="anchor"></a>Practice</h5>
<ul>
<li>Explain why the line of <code>acc</code> intersects the curve of <code>PPV</code> at the point at the same point as the curve of <code>NPV</code>.</li>
</ul>
<p>While the curves shown for <code>PPV</code> and <code>NPV</code> so far illustrate their dependence on the prevalence (<code>prev</code>), we can also ask: How do these conditional probabilities vary as a function of the decisions sensitivity (<code>sens</code>) and specificity (<code>spec</code>)? To provide a visual answer to this question, we plot them as 3D planes (i.e., as functions of both <code>sens</code> and <code>spec</code>, for a given value of <code>prev</code>) with the following commands:<a href="#fn5" class="footnoteRef" id="fnref5"><sup>5</sup></a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Plot plane of PPV and NPV as functions of sens and spec (for given prev): 
<span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(s10, <span class="dt">type =</span> <span class="st">"plane"</span>, <span class="dt">what =</span> <span class="st">"PPV"</span>, <span class="dt">cex_lbl =</span> .<span class="dv">7</span>)  <span class="co"># PPV by sens x spec (fixed prev)</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(s10, <span class="dt">type =</span> <span class="st">"plane"</span>, <span class="dt">what =</span> <span class="st">"NPV"</span>, <span class="dt">cex_lbl =</span> .<span class="dv">7</span>)  <span class="co"># NPV by sens x spec (fixed prev)</span></code></pre></div>
<p><img src="E_riskyr_primer_files/figure-html/s10_planes-1.png" width="556.8" style="display: block; margin: auto;"><img src="E_riskyr_primer_files/figure-html/s10_planes-2.png" width="556.8" style="display: block; margin: auto;"></p>
<p>This comparison shows that the curves of <code>PPV</code> and <code>NPV</code> (created by <code>type = "curve"</code> above) were only two out of an infinite number of possible intersections of two planes (created by <code>type = "plane"</code> here). Consequently, the current values of <code>PPV</code> and <code>NPV</code> (shown as yellow points on the planes) crucially depend on the condition’s prevalence (<code>prev</code>), the decision’s sensitivity (<code>sens</code>), and the decision’s specificity (<code>spec</code>).</p>
<!-- Conclusion: -->
<p>In retrospect, these dependencies make it clear why it is so hard to provide an answer to the seemingly simple question: What’s the probability of having some condition when testing positive or negative for it? While <code>riskyr</code> cannot simplify this issue, we hope that you are convinced that it helps to compute, transform, and see some relationships that are not immediately obvious from the mathematical definitions of the underlying concepts. If you feel that this improves your understanding, we came a little closer to our goal of rendering risk literacy more transparent.</p>
</div>
<div id="practice-3" class="section level5">
<h5 class="hasAnchor">
<a href="#practice-3" class="anchor"></a>Practice</h5>
<ul>
<li>Scenario 9 in the <code>riskyr</code> collection of <code>scenarios</code> contains a version of the same situation that assumes a different population (with a lower prevalence value for the same condition). Inspect and explore the consequence of this change by following the same steps for <code>s9</code> as for <code>s10</code> above.</li>
</ul>
<!-- Spoiler alarm:  --><p>Here are the first steps:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Select Scenario 9: </span>
s9 &lt;-<span class="st"> </span>scenarios<span class="op">$</span>n9  <span class="co"># assign pre-defined Scenario 9 to s9. </span>

<span class="co"># Basic scenario information: </span>
s9<span class="op">$</span>scen_lbl  <span class="co"># shows descriptive label:</span>
<span class="co">#&gt; [1] "PSA test (baseline)"</span>
s9<span class="op">$</span>popu_lbl  <span class="co"># shows current population:</span>
<span class="co">#&gt; [1] "Males (general population)"</span></code></pre></div>
<p>Now re-do the plots (for <code>s10</code> above) – and note the changes between <code>s9</code> and <code>s10</code>. Importantly, the properties of the test are identical for both scenarios – only the population (i.e., its prevalence for the condition) has changed.</p>
</div>
</div>
</div>
<div id="conclusion" class="section level3">
<h3 class="hasAnchor">
<a href="#conclusion" class="anchor"></a>Conclusion</h3>
<p>This introduction should suffice to get you started with using <code>riskyr</code>. Have fun by exploring the provided scenarios and creating your own examples!</p>
</div>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<ul>
<li><p>Arkes, H. R., &amp; Gaissmaier, W. (2012). Psychological research and the prostate-cancer screening controversy. <em>Psychological Science</em>, <em>23</em>, 547–553.</p></li>
<li><p>Dressel, J., &amp; Farid, H. (2018). The accuracy, fairness, and limits of predicting recidivism. <em>Science Advances</em>, <em>4</em>, eaao5580.</p></li>
</ul>
<div id="resources" class="section level3">
<h3 class="hasAnchor">
<a href="#resources" class="anchor"></a>Resources</h3>
<p>The following resources and versions are currently available:</p>
<table class="table">
<colgroup>
<col width="32%">
<col width="26%">
<col width="41%">
</colgroup>
<thead><tr class="header">
<th align="left">Type:</th>
<th align="left">Version:</th>
<th align="left">URL:</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">A. <code>riskyr</code> (R package):</td>
<td align="left"><a href="https://CRAN.R-project.org/package=riskyr">Release version</a></td>
<td align="left"><a href="https://CRAN.R-project.org/package=riskyr" class="uri">https://CRAN.R-project.org/package=riskyr</a></td>
</tr>
<tr class="even">
<td align="left"> </td>
<td align="left"><a href="https://github.com/hneth/riskyr">Development version</a></td>
<td align="left"><a href="https://github.com/hneth/riskyr" class="uri">https://github.com/hneth/riskyr</a></td>
</tr>
<tr class="odd">
<td align="left">B. <code>riskyrApp</code> (R Shiny code):</td>
<td align="left"><a href="http://riskyr.org">Online version</a></td>
<td align="left"><a href="http://riskyr.org" class="uri">http://riskyr.org</a></td>
</tr>
<tr class="even">
<td align="left"> </td>
<td align="left"><a href="https://github.com/hneth/riskyrApp">Development version</a></td>
<td align="left"><a href="https://github.com/hneth/riskyrApp" class="uri">https://github.com/hneth/riskyrApp</a></td>
</tr>
<tr class="odd">
<td align="left">C. Online documentation:</td>
<td align="left"><a href="https://hneth.github.io/riskyr">Release version</a></td>
<td align="left"><a href="https://hneth.github.io/riskyr" class="uri">https://hneth.github.io/riskyr</a></td>
</tr>
<tr class="even">
<td align="left"> </td>
<td align="left"><a href="https://hneth.github.io/riskyr/dev">Development version</a></td>
<td align="left"><a href="https://hneth.github.io/riskyr/dev" class="uri">https://hneth.github.io/riskyr/dev</a></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="contact" class="section level2">
<h2 class="hasAnchor">
<a href="#contact" class="anchor"></a>Contact</h2>
<!-- uni.kn logo and link to SPDS: -->
<p><a href="https://www.spds.uni-konstanz.de/"> <img src="../inst/pix/uniKn_logo.png" alt="spds.uni.kn" style="width: 280px; float: right; border:15;"></a></p>
<p>We appreciate your feedback, comments, or questions.</p>
<ul>
<li><p>Please report any <code>riskyr</code>-related issues at <a href="https://github.com/hneth/riskyr/issues" class="uri">https://github.com/hneth/riskyr/issues</a>.</p></li>
<li><p>Contact us at <a href="mailto:contact.riskyr@gmail.com">contact.riskyr@gmail.com</a> with any comments, questions, or suggestions.</p></li>
</ul>
</div>
<div id="all-riskyr-vignettes" class="section level2">
<h2 class="hasAnchor">
<a href="#all-riskyr-vignettes" class="anchor"></a>All riskyr vignettes</h2>
<!-- riskyr logo: -->
<p><a href="https://github.com/hneth/riskyr"> <img src="../inst/pix/riskyr_cube.png" alt="riskyr" style="width: 125px; float: right; border:20;"></a></p>
<!-- Index of vignettes: -->
<table class="table">
<thead><tr class="header">
<th align="right">Nr.</th>
<th align="left">Vignette</th>
<th align="left">Content</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">A.</td>
<td align="left"><a href="A_user_guide.html">User guide</a></td>
<td align="left">Motivation and general instructions</td>
</tr>
<tr class="even">
<td align="right">B.</td>
<td align="left"><a href="B_data_formats.html">Data formats</a></td>
<td align="left">Data formats: Frequencies and probabilities</td>
</tr>
<tr class="odd">
<td align="right">C.</td>
<td align="left"><a href="C_confusion_matrix.html">Confusion matrix</a></td>
<td align="left">Confusion matrix and accuracy metrics</td>
</tr>
<tr class="even">
<td align="right">D.</td>
<td align="left"><a href="D_functional_perspectives.html">Functional perspectives</a></td>
<td align="left">Adopting functional perspectives</td>
</tr>
<tr class="odd">
<td align="right">E.</td>
<td align="left"><a href="E_riskyr_primer.html">Quick start primer</a></td>
<td align="left">Quick start primer</td>
</tr>
</tbody>
</table>
<!-- eof. -->
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>The data is made-up, but the issue is real. See Dressel and Farid (2018) for a recent study on this issue.<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>If no population size value <code>N</code> is specified, a suitable value is provided.<a href="#fnref2">↩</a></p></li>
<li id="fn3"><p>Tukey, J.W. (1962). <em>The future of data analysis</em>. (In: The Collected Works of John W. Tukey, Volume 3, p. 457).<a href="#fnref3">↩</a></p></li>
<li id="fn4"><p>The difference between <code>NPV = 190/197 = 0.964467</code> (when computing the ratio of frequencies) and <code>NPV = 0.966</code> (in the <code>summary</code>) is due to rounding tree frequencies to integer values. If absolute precision is required, we can plot the frequency tree without rounding by adding an argument <code>round = FALSE</code>.<a href="#fnref4">↩</a></p></li>
<li id="fn5"><p>The <code><a href="https://www.rdocumentation.org/packages/graphics/topics/par">par()</a></code> commands before and after the calls to <code>plot</code> in this example are not needed if you re-create the plots for yourself. They only set and reset the R plotting space to allow plotting both planes next to each other.<a href="#fnref5">↩</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#getting-started">Getting started</a><ul class="nav nav-pills nav-stacked">
<li><a href="#defining-a-scenario">Defining a scenario</a></li>
      <li><a href="#using-existing-scenarios">Using existing scenarios</a></li>
      <li><a href="#conclusion">Conclusion</a></li>
      </ul>
</li>
      <li>
<a href="#references">References</a><ul class="nav nav-pills nav-stacked">
<li><a href="#resources">Resources</a></li>
      </ul>
</li>
      <li><a href="#contact">Contact</a></li>
      <li><a href="#all-riskyr-vignettes">All riskyr vignettes</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://www.spds.uni-konstanz.de/hans-neth">Hansjoerg Neth</a>, <a href="https://www.spds.uni-konstanz.de/felix-gaisbauer">Felix Gaisbauer</a>, <a href="https://www.spds.uni-konstanz.de/nico-gradwohl">Nico Gradwohl</a>, <a href="https://www.spds.uni-konstanz.de/prof-dr-wolfgang-gaissmaier">Wolfgang Gaissmaier</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
